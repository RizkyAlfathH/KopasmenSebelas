<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>KOPASMEN - Form Anggota</title>

<!-- Library -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://unpkg.com/phosphor-icons"></script>

{% load widget_tweaks %}

<style>
    * {
        font-family: 'Poppins', sans-serif;
        box-sizing: border-box;
    }

    body {
        background: #f5f5f5;
        margin: 0;
        display: flex;
    }

    /* Sidebar */
    .sidebar {
        width: 280px;
        background: linear-gradient(180deg, #FFD700 0%, #FFF8DC 100%);
        padding: 20px 0;
        position: fixed;
        height: 100vh;
        box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    }

    /* Main content */
    .main-content {
        margin-left: 280px;
        padding: 30px;
        flex: 1;
    }

    .form-card {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 2px 20px rgba(0,0,0,0.08);
        width: 100%;
        max-width: 100%;
    }

    h2 {
        font-weight: 600;
        margin-bottom: 25px;
        color: #4A2C2A;
    }

    label {
        font-weight: 500;
        color: #4A2C2A;
        margin-bottom: 6px;
        display: block;
        font-size: 14px;
    }

    input.form-control, 
    select.form-control, 
    textarea.form-control {
        border-radius: 8px;
        font-size: 14px;
        padding: 8px 12px;
        border: 1px solid #ccc;
    }

    input.form-control:focus,
    select.form-control:focus,
    textarea.form-control:focus {
        border-color: #FFD700;
        box-shadow: 0 0 5px rgba(255, 215, 0, 0.4);
        outline: none;
    }

    .input-wrapper {
        position: relative;
        width: 100%;
    }

    .input-wrapper input,
    .input-wrapper select {
        width: 100%;
        padding-right: 32px; /* ruang untuk ikon di dalam input */
        border-radius: 8px;
        font-size: 14px;
        padding: 8px 12px;
        border: 1px solid #ccc;
        transition: 0.2s;
    }

    .input-wrapper input:focus,
    .input-wrapper select:focus {
        border-color: #FFD700;
        box-shadow: 0 0 5px rgba(255, 215, 0, 0.4);
        outline: none;
    }

    .input-icon {
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
        color: #4A2C2A;
        cursor: pointer;
        opacity: 0.8;
        font-size: 14px;
        transition: 0.2s ease;
    }

    .input-icon:hover {
        opacity: 1;
        transform: translateY(-50%) scale(1.1);
    }


    /* Tombol */
    .btn-simpan {
        background: #FFD700; 
        color: #4A2C2A; 
        font-weight: 600;
        padding: 6px 14px; 
        border-radius: 6px; 
        text-decoration: none;
        display: inline-flex; 
        align-items: center; 
        gap: 4px;
        font-size: 13px; 
        transition: 0.2s;
        border: none;
    }

    .btn-simpan:hover {
        background: #e6c200;
    }

    .btn-outline {
        background: transparent;
        border: 1px solid #ccc;
        color: #4A2C2A;
        font-weight: 500;
        border-radius: 6px;
        padding: 6px 14px;
        font-size: 13px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: 0.2s ease;
        text-decoration: none;
    }

    .btn-outline:hover {
        background: #fff9d4;
    }

    .alert {
        background: #fff3cd;
        border: 1px solid #ffeeba;
        border-radius: 8px;
        padding: 12px;
        margin-top: 20px;
        font-size: 14px;
        color: #856404;
    }
</style>
</head>

<body>
{% include "partials/sidebar.html" %}

<div class="main-content">
    <div class="form-card">
        <h2>{{ judul }}</h2>
        <form method="post">
            {% csrf_token %}
            
            <div class="row g-3">
                {% for field in form %}
                    {% if "password" in field.name %}
                        <div class="col-md-4">
                            <label>{{ field.label }}</label>
                            <div class="input-wrapper">
                                {{ field|add_class:"form-control" }}
                                <i class="bi bi-eye-slash-fill input-icon toggle-password"></i>
                            </div>
                        </div>
                    {% elif "role" in field.name %}
                        <div class="col-md-4">
                            <label>{{ field.label }}</label>
                            <div class="input-wrapper">
                                {{ field|add_class:"form-control" }}
                                <i class="bi bi-caret-down-fill input-icon"></i>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-md-4">
                            <label>{{ field.label }}</label>
                            {{ field|add_class:"form-control" }}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <div class="text-end mt-4">
                <a href="{% url 'kelola_akun' %}" class="btn-outline">Batal</a>
                <button type="submit" class="btn-simpan">Simpan</button>
            </div>

            {% if form.errors %}
            <div class="alert mt-4">
                <ul class="mb-0">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </form>
    </div>
</div>

<script>
$(document).on('click', '.toggle-password', function() {
    const input = $(this).siblings('input');
    const icon = $(this);

    if (input.attr('type') === 'password') {
        input.attr('type', 'text');
        icon.removeClass('bi-eye-slash-fill').addClass('bi-eye-fill');
    } else {
        input.attr('type', 'password');
        icon.removeClass('bi-eye-fill').addClass('bi-eye-slash-fill');
    }
});
</script>

</body>
</html>
